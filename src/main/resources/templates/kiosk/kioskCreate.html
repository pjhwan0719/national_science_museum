<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Kiosk 등록</title>

    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!-- 제이쿼리 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <style>
        .kioskInfo{
            max-width: 200px;
            min-width: 200px;
        }
        .col-sm-10{
            max-width: 230px;
            min-width: 230px;
        }

        #fullBox {
            position: relative;
            width: 100%;
            height: 100%;
         }
         #joinBox {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,100%);
            padding: 20px;
            border: 1px solid #dcdcdc;
            border-radius: 10px;
         }
    </style>
</head>
<body>
    <div id="fullBox">
        <div id="joinBox">
            <form class="form-horizontal" id="joinForm">
                <div class="form-group" style="text-align:center;">
                    <font size="6px;"><b>Kiosk 등록</b></font>
                </div>
                <div class="form-group">
                    <label for="kiosk_id" class="col-sm-2 control-label">ID</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control kioskInfo" name="id" id="kiosk_id" autocomplete='off' placeholder="kiosk ID">
                    </div>
                </div>
                <div class="form-group">
                    <label for="kiosk_ip" class="col-sm-2 control-label">IP</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control kioskInfo" name="ip" id="kiosk_ip" autocomplete='off' placeholder="kiosk IP">
                    </div>
                </div>
                <div class="form-group">
                    <label for="kiosk_ip" class="col-sm-2 control-label">Sector</label>
                    <div class="col-sm-10">
                        <select class="form-control kioskInfo" id="sector_code">
                            <option th:each="sector:${sectorList}"
                                    th:value="${sector?.code}"
                                    th:utext="${sector?.name}">
                            </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="button" class="btn btn-primary" style="float:right;" onclick="fn_kioskCreate();">등록</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</body>
<script>

    function fn_kioskCreate(){
        let kiosk_id = $('#kiosk_id').val();
        let kiosk_ip = $('#kiosk_ip').val();
        let sector_code = $("#sector_code option:selected").val();

        if(kiosk_id === '') {
            alert('ID를 입력하세요.');
            return false;
        }
        if(kiosk_ip === '') {
            alert('IP를 입력하세요.');
            return false;
        }

        $.ajax({
            async: false
			,cache: false
            ,url :'/kiosk/new'
            ,type :'POST'
            ,data:{
                kiosk_id : kiosk_id
                ,kiosk_ip : kiosk_ip
                ,sector_code : sector_code
            }
            ,dataType:'json'
            ,success: function(data){
                console.log('Success Data >> '+JSON.stringify(data));
                alert(data.msg);
                location.reload();
            }
            ,error: function(data){
                console.log('Error Data >> '+JSON.stringify(data));
                var msg = data.responseJSON.msg;
                alert(msg);
            }
        });
    }
</script>
</html>
